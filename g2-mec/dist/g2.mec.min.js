/**
 * g2.mec (c) 2013-16 Stefan Goessner
 * @license
 * MIT License
 */
g2.symbol.origin=function(){var t=3;return g2().beg({lc:"round",lj:"round",lw:1,fs:"@nodfill"}).p().m(6*t,0).l(0,0).l(0,6*t).stroke().p().m(10*t,0).l(6*t,3/4*t).a(-Math.PI/3,6*t,-3/4*t).z().m(0,10*t).l(3/4*t,6*t).a(Math.PI/3,-3/4*t,6*t).z().drw().cir(0,0,t).end()}();g2.State.nodcolor="#333";g2.State.nodfill="#dedede";g2.State.nodfill2="#aeaeae";g2.State.linkcolor="#666";g2.State.linkfill="rgba(176,176,176,0.5)";g2.State.solid=[];g2.State.dash=[15,10];g2.State.dot=[4,4];g2.State.dashdot=[25,6.5,2,6.5];g2.symbol.nod=g2().cir(0,0,5,{ls:"@nodcolor",fs:"@nodfill"});g2.symbol.dblnod=g2().cir(0,0,6,{ls:"@nodcolor",fs:"@nodfill"}).cir(0,0,3,{ls:"@nodcolor",fs:"@nodfill2"});g2.symbol.nodfix=g2().p().m(-8,-12).l(0,0).l(8,-12).drw({ls:"@nodcolor",fs:"@nodfill2"}).cir(0,0,5,{ls:"@nodcolor",fs:"@nodfill"});g2.symbol.dblnodfix=g2().p().m(-8,-12).l(0,0).l(8,-12).drw({ls:"@nodcolor",fs:"@nodfill2"}).cir(0,0,6,{ls:"@nodcolor",fs:"@nodfill"}).cir(0,0,3,{ls:"@nodcolor",fs:"@nodfill2"});g2.symbol.nodflt=g2().style({ls:"@nodcolor",fs:"@nodfill"}).p().m(-8,-12).l(0,0).l(8,-12).z().drw({fs:"@nodfill2"}).cir(0,0,5,{fs:"@nodfill"}).lin(-9,-19,9,-19,{ls:"@nodfill2",lw:5,lwnosc:false}).lin(-9,-15.5,9,-15.5,{ls:"@nodcolor",lw:2,lwnosc:false});g2.symbol.dblnodflt=g2().style({ls:"@nodcolor",fs:"@nodfill"}).p().m(-8,-12).l(0,0).l(8,-12).z().drw({fs:"@nodfill2"}).cir(0,0,6,{fs:"@nodfill"}).cir(0,0,3,{ls:"@nodcolor",fs:"@nodfill2"}).lin(-9,-19,9,-19,{ls:"@nodfill2",lw:5,lwnosc:false}).lin(-9,-15.5,9,-15.5,{ls:"@nodcolor",lw:2,lwnosc:false});g2.symbol.gnd=g2().cir(0,0,5,{ls:"@nodcolor",fs:"@nodfill"}).p().m(0,5).a(-Math.PI/2,5,0).l(-5,0).a(Math.PI/2,0,-5).z().fill({fs:"@nodcolor"});g2.symbol.pol=g2().cir(0,0,5,{ls:"@nodcolor",fs:"@nodfill"}).cir(0,0,2,{ls:"@nodcolor",fs:"@nodcolor"});g2.prototype.vec=function t(o,r,n,l,s){var e,i,a=n-o,y=l-r,d=Math.hypot(a,y),c=d>0?a/d:0,p=d>0?y/d:0,u=Object.assign({ls:"@nodcolor",lw:1},s,{fs:"@ls",lc:"round",lj:"round"});if(d>12)this.p().m(o,r).l(e=n,i=l).m(e,i).l(e+=-12*c-2.5*p,i+=-12*p+2.5*c).a(-Math.PI/3,e+5*p,i-5*c).z().drw(u);else this.lin(o,r,n,l,u);return this.proxy(g2.prototype.lin.proxy,[o,r,n,l,s])};g2.prototype.avec=function o(t,r,n,l,s,e){var i=s>=0?-12/n:12/n,a=Math.cos(l+s+i),y=Math.sin(l+s+i);return this.beg(Object.assign({ls:"@nodcolor",lw:1},e,{fs:"@ls",lc:"round",lj:"round"})).arc(t,r,n,l,s,{fs:"transparent"}).p().m(t+n*Math.cos(l+s),r+n*Math.sin(l+s)).l(t+(n-2.5)*a,r+(n-2.5)*y).a(Math.PI/3,t+(n+2.5)*a,r+(n+2.5)*y).z().drw().end().proxy(g2.prototype.arc.proxy,[t,r,n,l,s,e])};g2.prototype.dim=function r(t,o,n,l,s){var e,i,a=n-t,y=l-o,d=Math.hypot(a,y),c=s&&s.pos==="out"?-1:1,p=c*(d>0?a/d:0),u=c*(d>0?y/d:0);return this.p().m(t,o).l(n,l).m(e=t,i=o).l(e+=12*p-2.5*u,i+=12*u+2.5*p).a(Math.PI/3,e+=5*u,i+=-5*p).z().m(t+3*u,o-3*p).l(t-3*u,o+3*p).z().m(e=n,i=l).l(e+=-12*p-2.5*u,i+=-12*u+2.5*p).a(-Math.PI/3,e+=5*u,i+=-5*p).z().m(n+3*u,l-3*p).l(n-3*u,l+3*p).z().drw(Object.assign({ls:"@nodcolor"},s,{fs:"@ls",lc:"round",lj:"round"})).proxy(g2.prototype.lin.proxy,[t,o,n,l,s])};g2.prototype.adim=function n(t,o,r,l,s,e){var i=e&&e.pos==="out"?-1:1,a=i*(s>=0?12/r:-12/r),y=r-2.5,d=r+2.5,c=Math.cos(l),p=Math.sin(l),u=Math.cos(l+s),h=Math.sin(l+s),f=Math.cos(l+a),x=Math.sin(l+a),g=Math.cos(l+s-a),m=Math.sin(l+s-a);return this.beg(Object.assign({ls:"@nodcolor"},e,{fs:"@ls",lc:"round",lj:"round"})).arc(t,o,r,l,s,{fs:"transparent"}).p().m(t+r*c,o+r*p).l(t+y*f,o+y*x).a(i*Math.PI/3,t+d*f,o+d*x).z().m(t+y*c,o+y*p).l(t+d*c,o+d*p).m(t+r*u,o+r*h).l(t+y*g,o+y*m).a(-i*Math.PI/3,t+d*g,o+d*m).z().m(t+y*u,o+y*h).l(t+d*u,o+d*h).drw().end().proxy(g2.prototype.arc.proxy,[t,o,r,l,s])};g2.prototype.slider=function l(t,o,r,n){var l=n&&n.b||32,s=n&&n.h||16;return this.beg(Object.assign({x:t,y:o,w:r||0,ls:"@nodcolor",fs:"@linkfill",lw:1},n,{lj:"round"})).rec(-l/2,-s/2,l,s).end().proxy(g2.prototype.rec.proxy,[t,o,l,s,n])};g2.prototype.spring=function(t,o,r,n,l){var s=Math.hypot(r-t,n-o),e=l&&l.h||16;if(s<=e)return this.lin(t,o,r,n,{ls:"@nodcolor"},l,{lc:"round",lj:"round"});else{var i={x1:t,y1:o,x2:r,y2:n,ux:(r-t)/s,uy:(n-o)/s},a=(t+r)/2,y=(o+n)/2;return this.p().m(i.x1,i.y1).l(a-i.ux*e/2,y-i.uy*e/2).l(a+(-i.ux/6+i.uy/2)*e,y+(-i.uy/6-i.ux/2)*e).l(a+(i.ux/6-i.uy/2)*e,y+(i.uy/6+i.ux/2)*e).l(a+i.ux*e/2,y+i.uy*e/2).l(i.x2,i.y2).stroke(Object.assign({ls:"@nodcolor"},l,{fs:"transparent",lc:"round",lj:"round"})).proxy(g2.prototype.lin.proxy,[t,o,r,n,l])}};g2.prototype.damper=function(t,o,r,n,l){var s=Math.hypot(r-t,n-o),e=l&&l.h||16;if(s<=e)return this.lin(t,o,r,n,{ls:"@nodcolor"},l,{lc:"round",lj:"round"});else{var i={x1:t,y1:o,x2:r,y2:n,ux:(r-t)/s,uy:(n-o)/s},a=(t+r)/2,y=(o+n)/2;return this.p().m(i.x1,i.y1).l(a-i.ux*e/2,y-i.uy*e/2).m(a+(i.ux-i.uy)*e/2,y+(i.uy+i.ux)*e/2).l(a+(-i.ux-i.uy)*e/2,y+(-i.uy+i.ux)*e/2).l(a+(-i.ux+i.uy)*e/2,y+(-i.uy-i.ux)*e/2).l(a+(i.ux+i.uy)*e/2,y+(i.uy-i.ux)*e/2).m(a,y).l(i.x2,i.y2).stroke(Object.assign({ls:"@nodcolor"},l,{fs:"transparent",lc:"round",lj:"round"})).proxy(g2.prototype.lin.proxy,[t,o,r,n,l])}};g2.prototype.link=function(t,o){return this.ply(t,true,Object.assign({fs:"@linkfill",ls:"@linkcolor"},o,{lw:5,lc:"round",lj:"round"})).proxy(g2.prototype.ply.proxy,[t,o])};g2.prototype.bar=function s(t,o,r){var n=t&&t.x||0,l=o&&(o.x||o.r&&o.r*Math.cos(o.w||0))||10,e=t&&t.y||0,i=o&&(o.y||o.r&&o.r*Math.sin(o.w||0))||0;this.cmds.push({c:s,a:[n,e,l,i,Object.assign({fs:"@linkfill",ls:"@linkcolor"},r,{lw:5,lc:"round",lj:"round"})]});return this};g2.prototype.bar.c2d=function e(t,o,r,n,l){var s=Math.hypot(r,n),e=8/s/2,i=this.createLinearGradient(t+n*e,o-r*e,t-n*e,o+r*e),a;this.save();this.g2_owner.state.save().add(l);a=this.g2_owner.state.get("ls");i.addColorStop(0,a);i.addColorStop(.5,this.g2_owner.state.get("fs"));i.addColorStop(1,a);this.strokeStyle=i;this.lineWidth=e*s*2;this.lineCap="round";this.beginPath();this.moveTo(t,o);this.lineTo(t+r,o+n);this.stroke();this.g2_owner.state.restore();this.restore()};g2.prototype.piston=function i(t,o,r,n,l){this.cmds.push({c:bar,a:[t.x,t.y,o,r,n,Object.assign({fs:"@linkfill",ls:"@linkcolor"},l,{lw:5,lc:"round",lj:"round"})]});return this};g2.prototype.piston.c2d=function a(t,o,r,n,l,s){var e=l&&Math.cos(l)||0,i=l&&Math.sin(l)||0,a=r/2,y=n/2,d=this.createLinearGradient(t+i*a,o-e*a,t-i*a,o+e*a),c=this.g2_owner.state.save().add(s).get("ls");d.addColorStop(0,c);d.addColorStop(.5,this.g2_owner.state.get("fs"));d.addColorStop(1,c);this.save();this.fillStyle=d;this.strokeStyle=c;this.beginPath();this.moveTo(t+e*a,o+i*y);this.lineTo(t-e*a,o+i*y);this.lineTo(t-e*a,o-i*y);this.lineTo(t+e*a,o-i*y);this.closePath();this.fill();this.stroke();this.restore();this.g2_owner.state.restore()};g2.prototype.ground=function y(t,o,r){var n=0,l,s,e,i,a,y,d,c,p,u,h,f=[],x=r&&r.h||4,g=r&&r.pos==="left"?1:-1,m=g2.prototype.ply.itrOf(t,r);l=s=m(t,n=0);f.push(l);i=m(t,n=1);y=i.x-s.x;d=i.y-s.y;u=Math.hypot(y,d)||1;a=c={x:y/u,y:d/u};for(e=m(t,++n);!e.done;e=m(t,++n)){y=e.x-i.x;d=e.y-i.y;u=Math.hypot(y,d)||1;p={x:y/u,y:d/u};h=(1-p.x*c.x-p.y*c.y)/(c.y*p.x-c.x*p.y);f.push({x:i.x+g*(x+1)*(h*c.x-c.y),y:i.y+g*(x+1)*(h*c.y+c.x)});c=p;s=i;i=e}if(o){y=l.x-i.x;d=l.y-i.y;u=Math.hypot(y,d)||1;p={x:y/u,y:d/u};h=(1-p.x*c.x-p.y*c.y)/(c.y*p.x-c.x*p.y);f.push({x:i.x+g*(x+1)*(h*c.x-c.y),y:i.y+g*(x+1)*(h*c.y+c.x)});h=(1-a.x*p.x-a.y*p.y)/(p.y*a.x-p.x*a.y);f[0]={x:l.x+g*(x+1)*(-h*a.x-a.y),y:l.y+g*(x+1)*(-h*a.y+a.x)}}else{f[0]={x:l.x-g*(x+1)*a.y,y:l.y+g*(x+1)*a.x};f.push({x:i.x-g*(x+1)*c.y,y:i.y+g*(x+1)*c.x})}return this.beg(Object.assign({x:-.5,y:-.5,ls:"@nodcolor",fs:"transparent",lw:2},r,{fs:"transparent",lc:"butt",lj:"miter"})).ply(t,o,r).ply(f,o,{ls:"@nodfill2",lw:2*x}).end()};g2.symbol.dot=g2().cir(0,0,3,{ls:"@nodcolor",fs:"@nodfill"});g2.symbol.sqr=g2().rec(-3,-3,6,6,{ls:"@nodcolor",fs:"@nodfill"});g2.symbol.tilde=g2().p().m(0,4).a(Math.PI/2,0,0).a(-Math.PI/2,0,-4).stroke({lc:"round"});g2.symbol.arrow=g2().p().m(0,0).l(-7,-2).a(Math.PI/3,-7,2).z().drw({lj:"round"});g2.symbol.tick=g2().p().m(0,-3).l(0,3).stroke({lc:"round"});g2.symbol.arrowtick=g2().p().m(0,-3).l(0,3).m(0,0).l(-7,-2).a(Math.PI/3,-7,2).z().drw({lj:"round",lc:"round"});g2.prototype.mark=function d(t,o,r){var n=this.findCmdIdx(g2.prototype._hasProxy);if(t&&n!==false){var l=this.cmds[n],s=l&&(l.proxy||l.c&&l.c.proxy),e=s&&s.apply(this,l.a),i={},a;o=[].concat(o||e.loc&&e.loc(o));for(var y=0;y<o.length&&!i.done;y++){i=e.p(o[y]);a=r<0?Math.atan2(i.dy,i.dx)-Math.PI:r>0?Math.atan2(i.dy,i.dx):0;this.use(t,{x:i.x,y:i.y,w:a,scl:e.style&&e.style.lw||"@lw",ls:e.style&&e.style.ls||"@ls",fs:"@ls"})}}return this};g2.prototype.label=function c(t,o,r){var n=this.findCmdIdx(g2.prototype._hasProxy);if(n!==false){var l=this.cmds[n],s=l&&(l.proxy||l.c&&l.c.proxy),e=s&&s.apply(this,l.a),i=e&&e.p(o)||{x:0,y:0,dx:0,dy:0},a=r+0===r?r||1:(r==="left"?-1:1)*g2.State.labelOffset,y=i.dy*a,d=-i.dx*a;i.x+=y;i.y+=d;if(t[0]==="@"&&e[t.substr(1)])t=""+e[t.substr(1)]();return this.txt(t,i.x,i.y,0,{thal:y>0?"left":y<0?"right":"center",tval:d>0?"bottom":d<0?"top":"middle"})}return this};g2.State.labelOffset=5;g2.prototype._hasProxy=function(t){return t.proxy||t.c.proxy};g2.prototype.proxy=function p(t,o){this.cmds.push({proxy:t,a:o,c:function(){}});return this};g2.prototype.rec.proxy=function(t,o,r,n){var l=Math.sqrt(2);var s=this.state.cartesian?{c:[0,0,1],e:[1,0,1],ne:[1,1,l],n:[0,1,1],nw:[-1,1,l],w:[-1,0,1],sw:[-1,-1,l],s:[0,-1,1],se:[1,-1,l]}:{c:[0,0,1],e:[1,0,1],ne:[1,-1,l],n:[0,-1,1],nw:[-1,-1,l],w:[-1,0,1],sw:[-1,1,l],s:[0,1,1],se:[1,1,l]};return{p:function(l){var e=s[l||"c"];return{x:t+(1+e[0])*r/2,y:o+(1+e[1])*n/2,dx:-e[1]/e[2],dy:e[0]/e[2]}}}};g2.prototype.cir.proxy=function(t,o,r){var n=Math.sqrt(2)/2;var l=this.state.cartesian?{p:[0,0],c:[0,0],e:[1,0],ne:[n,n],n:[0,1],nw:[-n,n],w:[-1,0],sw:[-n,-n],s:[0,-1],se:[n,-n]}:{p:[0,0],c:[0,0],e:[1,0],ne:[n,-n],n:[0,-1],nw:[-n,-n],w:[-1,0],sw:[-n,n],s:[0,1],se:[n,n]};return{p:function(n){var s=n+0===n?[Math.cos(n*2*Math.PI),Math.sin(n*2*Math.PI)]:l[n||"c"];return{x:t+s[0]*r,y:o+s[1]*r,dx:-s[1],dy:s[0]}},len:function(){return 2*Math.PI*r},radius:function(){return r},diameter:function(){return 2*r}}};g2.prototype.lin.proxy=function(t,o,r,n,l){var s=r-t,e=n-o,i=Math.hypot(s,e),a=i>0?s/i:0,y=i>0?e/i:0,d=i<40?1/2:1/Math.floor(i/20),c=i<20?1/20*i:1;return{get style(){return l},p:function(r){var n=r==="beg"?0:r==="end"?1:r==="mid"||r==="c"?.5:r+0===r?r:.5;return{x:t+s*n,y:o+e*n,dx:a,dy:y}},len:function(){return i},du:function(){return d},slip:function(){return c},s:function(t){var o=t*t;return 3*o-2*t*o}}};g2.prototype.arc.proxy=function(t,o,r,n,l){var s=Math.abs(r*l),e=s<30?1/Math.max(3,Math.floor(Math.abs(l)*2+.5)):1/Math.floor(s/10),i=s<30?1/120*s:s<100?1/4:s<200?1/2:1;return{p:function(s){var e=s==="beg"?0:s==="end"?1:s==="mid"?.5:s+0===s?s:.5;var e=s==="beg"?0:s==="end"?1:s==="mid"?.5:s;return{x:t+r*Math.cos(n+e*l),y:o+r*Math.sin(n+e*l),dx:-Math.sin(n+e*l),dy:Math.cos(n+e*l)}},len:function(){return s},du:function(){return e},slip:function(){return i},s:l*l>=Math.PI*Math.PI?function(t){return t}:function(t){var o=t*t;return 3*o-2*t*o}}};g2.prototype.ply.proxy=function(t,o,r){var n=g2.prototype.ply.itr,l=n(t).count,s=0;return{loc:function(t){return t==="beg"?"#0":t==="end"?"#"+Math.max(l-1,0):t==="mid"?function(){var t=[];for(var o=1;o<l-1;o++)t.push("#"+o);return t}():t},p:function(t){if(typeof t==="string"&&t[0]==="#")return this.pIdx(+t.substr(1));else return this.pPar(t)},pIdx:function(o){var r=Math.max(o-1,0),s=Math.min(o+1,l-1),e=n(t,r),i=n(t,o),a=n(t,s),y=a.x-e.x,d=a.y-e.y,c=Math.hypot(y,d);return{x:i.x,y:i.y,dx:y/c,dy:d/c}},pPar:function(o){return n(t,0)},length:function(){if(s===0){var o,r,e=n(t,0),i;for(o=0,r=1;o<(closed?l:l-1);o++,r=(o+1)%l){i=n(t,r);s+=Math.hypot(i.x-e.x,i.y-e.y);e=i}}return s}}};g2.prototype.use.proxy=function(t,o){return g2.prototype.cir.proxy.call(this,o.x,o.y,5,o)};g2.prototype.end.proxy=function(t){var o=this.myBeg();return g2.prototype.cir.proxy.call(this,o.a[1]||0,o.a[2]||0,3)};